## 传火(设置相关结构会自带)
一个从机也能是另外一些从机的master，当该从机从他的master同步数据时，也会对应将数据同步到他的从机中。

* 该方式默认就有，给从机设置从机就可以使用该模式

* 该模式缺点是当某一层的从机短线时，他下面的从机包括这些从机的从机将无法同步到顶层主机数据。

## 反客为主(需要手动设置)
当主机挂掉时，该主机中的一个从机可以成为一个master。但是此时只有指定了该从机为master的其他从机以及他们的从机才能通过该新的master同步到数据，其他原本的从机需要用命令重新指定他为从机。

## 哨兵模式(自动设置的反客为主)
当一个主服务器不能正常工作时，哨兵会开始一次自动故障迁移操作，它会将失效主服务器的其中一个从服务器升级为新的主服务器， 并让失效主服务器的其他从服务器改为复制新的主服务器；当客户端试图连接失效的主服务器时， 集群也会向客户端返回新主服务器的地址，使得集群可以使用新主服务器代替失效服务器。

* 哨兵本质上是一个启动的服务。

* 原master主机再次重启后，将会成为新master主机的从机。

从机被选为新的master主机的规则由配置文件的设定与一个规则来决定。  

`规则`

1. 配置中优先级值最小的被选中。
2. 根据1，如果选取最后发现多个从机的优先级相同，选择与主机数据同步最好从机晋升为master主机(redis主从复制中存在复制延迟，因为master主机只有一个，但是从机可能有几层)。
3. 根据2，如果他们的数据同步的数量都相同，则根据每个redis服务启动时会运行的一个runid来决定(runid有40位)，runid最小的变为master主机。