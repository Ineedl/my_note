## av_image_get_buffer_size

> 原型

```
int av_image_get_buffer_size(
    enum AVPixelFormat pix_fmt, 
    int width, 
    int height, 
    int align   
);
```

> 作用

通过指定像素格式、图像宽、图像高来计算原始图片数据所需的内存大小

> 参数

pix_fmt：原始图片数据类型(YUV420 YUV444等)
width：原始图片数据宽
height：原始图片数据高
align：设定内存对齐的对齐数

## av_image_copy_to_buffer

> 原型

```
av_image_copy_to_buffer(
    uint8_t *dst,
    int dst_size,
    const uint8_t * const src_data[4],
    const int src_linesize[4],
    enum AVPixelFormat pix_fmt,
    int width,
    int height,
    int align
);
```

> 作用

根据原数据的行宽、高、宽以及目标地址，将格式化后的一帧图片数据输出到目标数组中。

> 参数

dst：目的地址
dst_size：目的数组长度
src_data：源数据地址(是一个二维指针，指向多少个char数组与图片格式有关，比如一般yuv420为3个，rgb24与rgb32为1个)
src_linesize：源数据行宽(int数组，数组长度与上述的char数组数量一致)
pix_fmt：图片格式
width：图片宽度
height：图片长度
align：源数据是否有行对其



## av_image_fill_plane_sizes