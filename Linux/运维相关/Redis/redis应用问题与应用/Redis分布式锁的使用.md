## 分布式CAP理论
在介绍分布式锁之前，先说一下CAP理论。因为现在提到分布式系统一定离不开CAP理论。C（Consistency）一致性、A（Availability）可用性、P（Partition tolerance）分区容错性。三者不能同时存在，由于P是必要因素，所以分为CP和AP两种模型。

## AP模型的分布式锁
AP模型是保证了在分布式系统中的高可用性。AP模型的分布式锁是基于Redis来实现的，适用于对数据的一致性要求不那么苛刻的场景中，可以保证高可用性。

`根据Redis存储的结构以及原理可以知道Redis无法保证主从节点数据的一致性(因为可能master写完数据后在同步时突然宕机)，无法保证在主节点宕机时将所有数据自动同步到从节点中。`



因此在业务要求保证一致性的场景中，Redis的分布式锁会在主节点宕机的情况下丢失锁信息而出现重复上锁的极端情况。
