[toc]

## 背景

C++11 引入了标准属性语法：

```c++
[[attribute]]
```

但为了避免属性名字冲突，属性允许加命名空间前缀：

```c++s
[[namespace::attribute]]
```

这样可以把属性组织到不同的命名空间，避免不同库或编译器定义同名属性冲突。

## 变化

c++17允许可以在一个属性声明里只写一次命名空间前缀，后面属性共享这个命名空间。

## 举例说明

### 允许的写法（C++11）

```c++
[[gnu::unused, gnu::always_inline]]
void foo();
```

这里 `gnu::` 命名空间被重复使用了两次。

------

### 优化后（C++17 才正式支持） — 命名空间只写一次

```c++
[[gnu::unused, always_inline]]
void foo();
```

这里，`always_inline` 被隐式理解为 `gnu::always_inline`，不必重复写 `gnu::`。

## 带命名空间属性

C++ 标准属性本身是不带命名空间的，比如：

```
cpp


复制编辑
[[nodiscard]]
[[deprecated]]
[[maybe_unused]]
```

它们都没有命名空间前缀。

------

但是，**很多编译器提供了带命名空间的属性扩展**，用来避免与标准属性或其他库的属性冲突。常见的带命名空间的属性主要出现在编译器特定的扩展中，或者标准库、平台提供的属性中。