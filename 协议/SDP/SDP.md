## 概述

SDP（Session Description Protocol）是一个用来描述多媒体会话的应用层控制协议，为会话通知、会话邀请和其它形式的多媒体会话初始化等目的提供了多媒体会话描述；

它是一个基于文本的协议，这样就能保证协议的可扩展性比较强，这样就使其具有广泛的应用范围；

SDP 完全是一种会话描述格式 ― 它不属于传输协议 ― 它只使用不同的适当的传输协议，包括会话通知协议（SAP）、会话初始协议（SIP）、实时流协议（RTSP）、MIME 扩展协议的电子邮件以及超文本传输协议（HTTP）。

SDP 不支持会话内容或媒体编码的协商，所以在流媒体中只用来描述媒体信息。媒体协商这一块要用RTSP来实现。

> 回话目录

会话目录用于协助多媒体会议的通告，并为会话参与者传送相关设置信息。SDP 即用于将这种信息传输到接收端。

在因特网组播骨干网（Mbone）中，会话目录工具被用于通告多媒体会议，并为参与者传送会议地址和参与者所需的会议特定工具信息，这由 SDP 完成。

SDP 连接好会话后，传送足够的信息给会话参与者。SDP 信息发送利用了会话通知协议（SAP），它周期性地组播通知数据包到已知组播地址和端口处。这些信息是 UDP 数据包，其中包含 SAP 协议头和文本有效载荷（text payload）。这里文本有效载荷指的是 SDP 会话描述。此外信息也可以通过电子邮件或 WWW （World Wide Web） 进行发送。

> SDP内容

SDP 文本信息包括：会话名称和意图； 会话持续时间； 构成会话的媒体； 有关接收媒体的信息（地址等）。

## 协议结构

* 如果SDP语法分析器不能识别某一类型(Type),则整个描述丢失。

SDP协议的信息是文本信息，采用 UTF-8 编 码中的 ISO 10646 字符集。

SDP描述由许多文本行组成，文本行的格式为
```
    <类型>=<值>
    
    <type>=<value>[CRLF]
```
类型是一个字母，值是结构化的文本串，其格式依类型而定。

## 描述类型

* 标注 * 符号的表示可选字段

`一般描述`

> v=  (SDP的版本号，不包括次版本号)

> o= (所有者/创建者和会话标识符)

格式：
```
 o=<用户名> <session id> <会话版本> <网络类型><地址类型> <地址>
```

> s= (会话名称)

格式：
```
s=<sessionname>
```

在整个会话中有且只有一个"s=""

> i=* (会话信息)

> u=* (URI 描述)

> e=* (Email 地址)

> p=* (电话号码)

> c=* (连接信息 ― 如果包含在所有媒体中，则不需要该字段)

格式：
```
c=<networktype> <address type> <connection address>
```

> b=* (带宽信息)

格式：
```
b=<modifier>:<bandwidth-value>
```

`时间描述`

> t = （会话活动时间） 

格式：
```
t=<start time>  <stop time>
```

> r = * （0或多次重复次数）

`更多的时间描述`

> z = * （时间区域调整） 

> k = * （加密密钥） 

> a = * （0 个或多个会话属性行）

格式：
```

rtpmap:

    a=rtpmap:<payload type><encoding name>/<clock rate>[/<encodingparameters>]
    a=rtpmap:<负载类型><编码名>/<时钟速率>[/<编码参数>]

显示属性:

    a=<TYPE>或 a=<TYPE>:<VALUES>
    
    例：
    a=framerate:<帧速率>        //单位:帧/秒
    a=lang:<语言标记>       //会话描述的缺省语言或媒体描述的语言
    
```

`媒体描述`

> m = （媒体名称和传输地址）

格式：
```
m=<media><port> <transport> <fmt list>
```

> i = * （媒体标题） 

> c = * （连接信息 — 如果包含在会话层则该字段可选） 

> b = * （带宽信息） 

> k = * （加密密钥） 

> a = * （0 个或多个会话属性行）