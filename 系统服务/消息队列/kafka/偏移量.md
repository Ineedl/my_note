## 偏移量

在kafka中生产和消费消息时，都会根据消息数量来提交偏移量，kafka内部维护了和某个主题相关的offset

* 生产者和消费者各自拥有自己的偏移量

* 生产者偏移量由kafka管理
* 消费者偏移量由kafka和消费者共同管理

* 出现问题时，允许消费者自己设置偏移量来进行重读

## consumer lag

生产者和消费者偏移量之间的差距

* 该值过大表示消息产生积压

## 偏移量提交

kafka内部有一些专门存储topic偏移量的topic(_consumer_offsets)

* 消费者偏移量递增通常是消费者自己处理,即消费者自己改写偏移量topic
* topic每个分区都各自有一个自己的偏移量

### 消费者组偏移量

消费组独立记录各自消费者的偏移量，看上去就像是消费者组中的每个消费者，都有一个虚拟指针指独立记录消费位置。