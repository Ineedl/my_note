[toc]

## 回表

**回表** 是指在使用索引查询时，由于索引无法满足查询所需的全部字段，MySQL 需要从索引树（例如 B+ 树）的叶子节点跳转到主表（聚簇索引或数据表）中去查找所需的额外字段。这种操作被称为“回表”。

### 回表的场景

1. **非覆盖索引**：当查询的字段不完全包含在所使用的索引中时，MySQL 必须回表查找其他字段。

   - 例如：表 

     ```
     users
     ```

      有一个联合索引 

     ```
     (name, age)
     ```

     ，执行以下 SQL 时会触发回表：

     ```
     sql
     
     
     复制编辑
     SELECT id, name FROM users WHERE name = 'Alice';
     ```

     由于 

     ```
     id
     ```

      字段不在索引 

     ```
     (name, age)
     ```

      中，MySQL 需要通过 

     ```
     name
     ```

      在索引中定位到记录的主键值，然后回表查询主键值对应的完整记录。

2. **查询主键值或其他非索引字段**：如果索引的叶子节点上存储的是主键值（适用于 InnoDB 引擎），而查询需要主键值或非索引字段时，也会导致回表。

## 覆盖索引定义

覆盖索引是一种避免回表查询的优化策略，只需要在一刻索引树上就能获取SQL所需的所有列数据，无需回表，速度更快。

* mysql只有支持B+Tree结构的索引，才能做覆盖索引。

`具体实现方式`

将被查询的字段建立普通或联合索引，这样的话就可以直接返回索引中的数据，不需要再通过这里面的数据去定位完整的数据行，然后取出不在索引中的数据。

