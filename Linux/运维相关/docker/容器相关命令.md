## 使用镜像启动容器

    docker run <image> [所使用的shell路径]
    
容器一旦运行过就会一直存在(之后不运行也存在)，除非删除。  
每一个启动的容器都会有一个不同的容器ID。
    
* 当指定了使用的shell路径时，将相当于在本地中打开一个shell连接容器中的shell。
    
* 常用选项  


    --name="Name"   给容器命名，不命名时启动的容器名称等于镜像ID
    -d              以后台的方式启动容器
    -it             以交互的方式运行，容器启动后会进入容器后会自动启动一个shell控制台。
    -p              指定容器中服务使用的端口号
        -p  IP:主机端口:容器端口
        -p  主机端口:容器端口
        -p  容器端口
        容器端口        //也可以直接不写p写一个容器端口 
    //要映射多个端口时使用多个-p和映射端口
    
    -v              使用容器数据卷让容器目录与主机目录映射
        -v  主机目录:容器目录[:读取权限] 
        -v  容器目录[:读取权限]
        -v  挂载名:容器目录[:读取权限]
    //要映射多个目录时使用多个-v
        
    -P(大写P)       随机指定一个端口号给容器中的服务使用
    
* 不加-P与-p的时候不会对外暴露端口

* -p与-P开放端口可以绕过centos中的firewall防火墙限制。

* -v相当于容器中一个目录挂载到主机中一个目录上，挂在后相当于一个容器属性，重启再次启动后映射仍然存在。

* -v映射后如果容器被删除了，挂载的文件夹和数据仍然存在，数据不会丢失，其实际上使用了双向拷贝。

* -v分为匿名挂载和具名挂载，详情看容器数据卷内容。
    
* 读取权限常用rw(读写),ro(只读)。

* 后台启动容器时，如果容器在本机器系统中没有一个前台进程，docker发现没有应用，将会关闭容器。

`实例：部署一个mysql服务器并且挂载数据文件与配置目录`

    docker run -d --name openMysql -p 3306:3306 -v /home/cjh/mysqlConf/:/etc/mysql/conf.d -v /home/cjh/mysqlData/:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=zxc563221659 mysql:5.7



## 查询运行容器命令

    docker ps

*该命令显示的容器ID为容器全ID的缩写

* 常用选项
    

    -a  结果包含历史运行过的容器信息
    -n=<number> 显示最近创建的容器信息，包括历史，n的最近n个创建过的容器信息。
    -q  仅显示容器编号
    
## 容器的不停止退出
在容器中快捷键

    ctrl + P + Q


## 容器的删除

    docker rm <容器ID>

* 常用选项


    -f 强制删除，运行中的容器也可以删除

删除全部容器

    docker rm - f $(docker ps -aq)
  
    
## 容器的启动与停止
启动容器

    docker start <容器id>
    
重启

    docker restart <容器id>
    
停止运行

    docker stop <容器id>
    
暴力强制中止一个容器

    docker kill <容器id>
 

## 容器日志的查看

    docker logs
    
只能查看容器的运行日志

* 常用选项


    -tf 设置日志输出的相关格式
    -n  设置日志的输出不随着新的写入而改变
    
* 常用相关命令


    //查看容器日志最后number行，会根据日志的写入而刷新，同tail命令
    docker logs -tf --tail <number> 033b37322567
   
 
## 查看容器中进程在实际主机中的信息

    docker top <容器id>

* 可以在主机中使用杀死进程命令来杀死该主机中的进程


## 查看镜像的源数据
该命令可以查询容器中所有配置信息

    docker inspect <容器id/容器名>


## 进入容器命令
### docker exec

    docker exec <容器id> <使用的shell>
    
* 通常用法


    //该命令以交互的方式用一个shell进入一个容器
    docker exec -it <容器id> <使用的shell>
    
### docker attach

    docker attach <容器id>
    
### 两者区别
docker exec进入容器后会打开一个新的终端，可以选择进入操作(-it)。
  
docker attach会进入容器当前正在执行的终端(一开始run的时候运行的终端)，不会启动进程


## 从容器内拷贝文件到主机上的命令

    docker cp <容器id>:<容器内文件绝对路径> <主机内文件绝对路径>

* 从主机上拷贝文件到容器中常使用挂载的方法

* 从容器中拷贝数据时与容器的运行状态无关(容器关闭数据还在)，无论他是关闭还是启动，都可以从容器中拷贝数据到主机。


## 查看容器资源占用状态

    docker stats [容器id]
    
   
## 查看docker中挂载的数据卷

    docker volume
    
常用命令：

    docker volume -ls   //查看所有挂载的数据卷
    