[toc]

## 背景

`__has_include` 是一个预处理器指令，用于检测指定的头文件是否存在。它在 C++17 标准中被正式纳入标准（此前部分编译器作为扩展支持）。

## 基本作用

- 让代码在编译时判断某个头文件是否存在。
- 根据判断结果决定是否包含某个头文件或启用特定代码。

------

## 语法

```c++
#if __has_include(<header>)
    #include <header>
#elif __has_include("header.h")
    #include "header.h"
#else
    // 头文件不存在时的替代方案
#endif
```

- `__has_include(<header>)` 用尖括号检查系统或标准库头文件。
- `__has_include("header.h")` 用引号检查当前目录或用户路径的头文件。

## 使用场景

- 编写跨平台代码时，条件包含不同平台的特定头文件。
- 兼容不同编译器或库版本。
- 提供更灵活的特性检测，比单纯宏定义更准确。